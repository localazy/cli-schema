{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://raw.githubusercontent.com/localazy/cli-schema/master/localazy.json",
  "type": "object",
  "default": {},
  "title": "Localazy CLI schema",
  "description": "Schema definition for Localazy CLI configuration file",
  "required": [],
  "properties": {
    "writeKey": {
      "$id": "#/properties/writeKey",
      "type": "string",
      "title": "Write key",
      "description": "Your application write key. (Can be found in Settings -> Access Keys )",
      "default": ""
    },
    "readKey": {
      "$id": "#/properties/readKey",
      "type": "string",
      "title": "Read key",
      "description": "Your application read key. (Can be found in Settings -> Access Keys )",
      "default": ""
    },
    "transformations": {
      "$id": "#/properties/transformations",
      "title": "Transformations section",
      "description": "The Transformations property allows defining rule for string transformations. Using transformations, you can eg. obtain file metadata from its path or build the specific path where to write translated files.",
      "default": [],
      "type": [
        "array",
        "object"
      ],
      "anyOf": [
        {
          "items": {
            "$ref": "#/definitions/transformationsItem"
          }
        },
        {
          "$ref": "#/definitions/transformationsItem"
        }
      ]
    },
    "download": {
      "$id": "#/properties/download",
      "type": "object",
      "title": "Download section",
      "description": "The download property describes how to process translated files and where to write them.",
      "default": {},
      "properties": {
        "includeSourceLang": {
          "type": "boolean",
          "description": "By default, the source language is not downloaded. Set it to true to include source files as well.",
          "default": false
        },
        "folder": {
          "type": "string",
          "description": "Base foler for the download action. It can be relative or absolute path.",
          "default": "."
        },
        "excludedLangs": {
          "description": "The list of languages to exclude from processing.",
          "type": [
            "string",
            "array"
          ],
          "anyOf": [
            {
              "items": {
                "type": "string"
              }
            },
            {
              "type": "string"
            }
          ]
        },
        "files": {
          "title": "File download",
          "description": "The rules to apply to all translated files. It can be either array object or a pattern string.",
          "default": [],
          "type": [
            "string",
            "array",
            "object"
          ],
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/definitions/downloadFiles"
            },
            {
              "items": {
                "$ref": "#/definitions/downloadFiles"
              }
            }
          ]
        }
      }
    },
    "upload": {
      "$id": "#/properties/upload",
      "type": "object",
      "title": "Upload section",
      "description": "The upload section defines how to collect files that you want to upload to the Localazy platform for localization and what metadata to include. It also defines how to process uploaded data.",
      "default": {},
      "properties": {
        "deprecateMissing": {
          "$id": "#/properties/upload/properties/deprecateMissing",
          "type": "boolean",
          "title": "Deprecate missing",
          "description": "Tells the server to deprecate any phrase missing in this upload batch. Deprecated phrases are still available but are not visible to translators.",
          "default": false
        },
        "importAsNew": {
          "$id": "#/properties/upload/properties/importAsNew",
          "type": "boolean",
          "title": "Import as new",
          "description": "Tells the server to import new phrases as unverified. Unverified phrases need to go through the review process. This option allows you to check translations using our unique review process if you are not sure of their quality. This option doesn’t apply to the source language.",
          "default": false
        },
        "allowDuplicateKeys": {
          "$id": "#/properties/upload/properties/allowDuplicateKeys",
          "type": "boolean",
          "title": "Allow duplicate keys",
          "description": "By default, you can have phrases with the same key in different files. For specific situations like using libraries and string overriding, it’s necessary to disable this option. You can find more on this topic in 'Modules, libraries, product flavors' article.",
          "default": false
        },
        "filterSource": {
          "$id": "#/properties/upload/properties/filterSource",
          "type": "boolean",
          "title": "Filter source",
          "description": "When set to true, strings that are the same as in the source langauge are not imported. This is important for platforms like iOS where localizable files contain the source phrase where the translation is not available. This option doesn’t apply to the source language.",
          "default": false
        },
        "appVersion": {
          "$id": "#/properties/upload/properties/appVersion",
          "type": "number",
          "title": "App version",
          "description": "Tells the server the version of the app in which the phrases where deprecated. It only makes sense with deprecateMissing switched to true. It allows for automatic versioning of deprecated phrases. This option can be provided on the command-line with -v option.",
          "default": 0
        },
        "type": {
          "$id": "#/properties/upload/properties/type",
          "type": "string",
          "title": "File type",
          "description": "The type of files you are about to upload. You can also define the type separately for each file. For more info about supported file formats check out the documentation.",
          "enum": [
            "android",
            "ios-strings",
            "ios-stringsdict",
            "ios-plist",
            "arb",
            "json",
            "xliff"
          ]
        },
        "features": {
          "$id": "#/properties/upload/properties/features",
          "title": "Enabled features",
          "description": "The list of features (eg. how to parse plurals) to enable for the given type. See the list of supported file formats in documentation for more information.",
          "default": [],
          "uniqueItems": true,
          "type": [
            "string",
            "array"
          ],
          "anyOf": [
            {
              "items": {
                "type": "string"
              }
            },
            {
              "type": "string"
            }
          ]
        },        
        "folder": {
          "$id": "#/properties/upload/properties/folder",
          "type": "string",
          "title": "Base folder",
          "description": "The base folder all operations are relative to. It can be relative or absolute path.",
          "default": ""
        },
        "files": {
          "$id": "#/properties/upload/properties/files",
          "type": "array",
          "title": "The files schema",
          "description": "An explanation about the purpose of this instance.",
          "default": [],
          "uniqueItems": true,
          "items": {
            "$id": "#/properties/upload/properties/files/items",
            "anyOf": [
              {
                "$id": "#/properties/upload/properties/files/items/anyOf/0",
                "type": "object",
                "title": "The first anyOf schema",
                "description": "An explanation about the purpose of this instance.",
                "default": {},
                "required": [
                  "group",
                  "pattern",
                  "excludes",
                  "type",
                  "features",
                  "conditions",
                  "lang",
                  "buildType",
                  "productFlavors",
                  "module",
                  "library",
                  "path",
                  "file"
                ],
                "properties": {
                  "group": {
                    "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/group",
                    "type": "string",
                    "title": "The group schema",
                    "description": "An explanation about the purpose of this instance.",
                    "default": ""
                  },
                  "pattern": {
                    "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/pattern",
                    "type": "string",
                    "title": "The pattern schema",
                    "description": "An explanation about the purpose of this instance.",
                    "default": ""
                  },
                  "excludes": {
                    "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/excludes",
                    "type": "array",
                    "title": "The excludes schema",
                    "description": "An explanation about the purpose of this instance.",
                    "default": [],
                    "uniqueItems": true,
                    "items": {
                      "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/excludes/items",
                      "anyOf": [
                        {
                          "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/excludes/items/anyOf/0",
                          "type": "string",
                          "title": "The first anyOf schema",
                          "description": "An explanation about the purpose of this instance.",
                          "default": ""
                        }
                      ]
                    }
                  },
                  "type": {
                    "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/type",
                    "type": "string",
                    "title": "The type schema",
                    "description": "An explanation about the purpose of this instance.",
                    "default": ""
                  },
                  "features": {
                    "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/features",
                    "type": "array",
                    "title": "The features schema",
                    "description": "An explanation about the purpose of this instance.",
                    "default": [],
                    "uniqueItems": true,
                    "items": {
                      "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/features/items",
                      "anyOf": [
                        {
                          "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/features/items/anyOf/0",
                          "type": "string",
                          "title": "The first anyOf schema",
                          "description": "An explanation about the purpose of this instance.",
                          "default": ""
                        }
                      ]
                    }
                  },
                  "conditions": {
                    "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/conditions",
                    "type": "array",
                    "title": "The conditions schema",
                    "description": "An explanation about the purpose of this instance.",
                    "default": [],
                    "uniqueItems": true,
                    "items": {
                      "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/conditions/items",
                      "anyOf": [
                        {
                          "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/conditions/items/anyOf/0",
                          "type": "string",
                          "title": "The first anyOf schema",
                          "description": "An explanation about the purpose of this instance.",
                          "default": ""
                        }
                      ]
                    }
                  },
                  "lang": {
                    "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/lang",
                    "type": "string",
                    "title": "The lang schema",
                    "description": "An explanation about the purpose of this instance.",
                    "default": ""
                  },
                  "buildType": {
                    "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/buildType",
                    "type": "string",
                    "title": "The buildType schema",
                    "description": "An explanation about the purpose of this instance.",
                    "default": ""
                  },
                  "productFlavors": {
                    "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/productFlavors",
                    "type": "string",
                    "title": "The productFlavors schema",
                    "description": "An explanation about the purpose of this instance.",
                    "default": ""
                  },
                  "module": {
                    "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/module",
                    "type": "string",
                    "title": "The module schema",
                    "description": "An explanation about the purpose of this instance.",
                    "default": ""
                  },
                  "library": {
                    "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/library",
                    "type": "string",
                    "title": "The library schema",
                    "description": "An explanation about the purpose of this instance.",
                    "default": ""
                  },
                  "path": {
                    "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/path",
                    "type": "string",
                    "title": "The path schema",
                    "description": "An explanation about the purpose of this instance.",
                    "default": ""
                  },
                  "file": {
                    "$id": "#/properties/upload/properties/files/items/anyOf/0/properties/file",
                    "type": "string",
                    "title": "The file schema",
                    "description": "An explanation about the purpose of this instance.",
                    "default": ""
                  }
                }
              }
            ]
          }
        }
      }
    }
  },
  "definitions": {
    "transformationsItem": {
      "default": {},
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "title": "Transformation name",
          "description": "Transformation name. Will be used as variable name in ${name} syntax.",
          "default": "transformation_name"
        },
        "source": {
          "type": "string",
          "title": "Transformation source",
          "description": "The source string is a transformation input with interpolated variables. Therefore, you can build it using more variables or string constants.",
          "default": "${path}"
        },
        "operations": {
          "title": "Operations",
          "description": "Array or string containing valid operations using a operation:argument syntax, wher operation name is one of the following: [trimStart, trimEnd, substringAfter, substringAfterLast, substringBefore, substringBeforeLast, append, prepend, replace, remove, removePrefix, removeSuffix, capitalize, capitalizeWords, lowerCase, upperCase, print, set, detectLang, formatLang, androidBuildType, androidProductFlavors]",
          "type": [
            "array",
            "string"
          ],
          "anyOf": [
            {
              "default": [],
              "items": {
                "type": "string"
              }
            },
            {
              "type": "string"
            }
          ]
        }
      }
    },
    "downloadFiles": {
      "type": "object",
      "properties": {
        "group": {
          "type": "string",
          "title": "Group",
          "description": "Allows to assign files to groups and run their rules separately."
        },
        "conditions": {
          "type": [
            "string",
            "array"
          ],
          "title": "Conditions",
          "description": "With conditions, you can introduce complex logic for processing files when they are downloaded. See documentation for options",
          "default": [],
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": true
            }
          ]
        },
        "stop": {
          "type": "boolean",
          "title": "Stop processing",
          "description": "If true, no more rules are processed for the given file. Only makes sense if more output rules are defined. By default, the first matching rule stops processing for the file.",
          "default": true
        },
        "output": {
          "type": "string",
          "title": "Output pattern",
          "description": "The pattern for generating output path and file. Use variables to build the pattern."
        }
      }
    },
    "uploadFiles": {
      "type": "object",
      "properties": {
        
      }
    }
  }
}